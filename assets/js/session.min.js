var session={state:void 0,check(){session.state=void 0,$.ajax({type:"POST",url:"class/usuario.php",data:{action:"checkSession",url:window.location.href}}).done(function(e){var data=JSON.parse(e);switch(data.status){case"login":$(".right_col").show(),session.setUsername(data.email,data.nombre),session.setMenu(data.eventos),session.state=!0,$(".main_container").removeAttr("style");break;case"nocredencial":$(".right_col").hide(),session.setUsername(data.username,data.nombre),session.setMenu(data.eventos),session.state=!1,swal({type:"error",title:"El usuario no tiene credenciales para ver esta página.",showConfirmButton:!1,timer:3e3});break;case"invalido":session.state=!1,location.href="login.html"}}).fail(function(e){showError(e),location.href="login.html"})},in(e){if(401==e.code){let timerInterval;Swal.fire({title:"Sesión Expirada!",html:"Redireccionando en <strong></strong> segundos.",timer:3e3,onBeforeOpen:()=>{Swal.showLoading(),timerInterval=setInterval(()=>{Swal.getContent().querySelector("strong").textContent=Swal.getTimerLeft()},100)},onClose:()=>{clearInterval(timerInterval)}}).then(result=>{session.state=!1,location.href="login.html"})}},setUsername(un,n){$("#call_username").html('<img src="images/user.png" alt="" > '+un+' <span class=" fa fa-angle-down" ></span> '),$("#call_name").text(n)},setMenu(eventos){$("#call_menu").html(""),$.each(eventos,function(i,item){$("#call_menu").append(`\n                <li>\n                    <a href="${item.url}">${item.nombre}</a>\n                </li>\n            `)})},end(){$.ajax({type:"POST",url:"class/usuario.php",data:{action:"endSession"}}).done(function(e){location.href="login.html"}).fail(function(e){showError(e)})},sideBarDraw(dataMenu){if($("#sidebar-menu").length){$("#sidebar-menu").empty();var menu_section=`<div class="menu_section">\n                <h3>${dataMenu.bodega}</h3>\n                <ul id="menu" class="nav side-menu">\n                    \n                </ul>\n            </div>`;$("#sidebar-menu").append(menu_section),$.each(dataMenu.eventos,function(i,item){if($("#"+item.menuPadre).length){if(!$("#"+item.id).length){var link=` <li id="${item.id}"><a href="${item.url}">${item.nombre}</a></li>`;$("#list_"+item.menuPadre).append(link)}}else{var menu=`<li id="${item.menuPadre}" ><a><i class="${item.icono}"></i> ${item.menuPadre} <span class="fa fa-chevron-down"></span></a>\n                            <ul id="list_${item.menuPadre}" class="nav child_menu">\n                                <li id="${item.id}"><a href="${item.url}">${item.nombre}</a></li>\n                            </ul>\n                        </li>`;$("#menu").append(menu)}}),"function"==typeof init_sidebar?init_sidebar():setTimeout(function(){Session.sideBarDraw(dataMenu)},500)}}};