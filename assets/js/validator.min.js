!function(root,factory){"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?module.exports=factory():root.FormValidator=factory()}(this,function(){function FormValidator(settings,formElm){this.data={},this.DOM={scope:formElm},this.settings=this.extend({},this.defaults,settings||{}),this.texts=this.extend({},this.texts,settings.texts||{}),this.settings.events&&this.events()}return FormValidator.prototype={texts:{invalid:"formato inv√°lido",short:"input is too short",long:"input is too long",checked:"must be checked",empty:"*",select:"Please select an option",number_min:"too low",number_max:"too high",url:"invalid URL",number:"not a number",email:"email address is invalid",email_repeat:"emails do not match",date:"invalid date",time:"invalid time",password_repeat:"passwords do not match",no_match:"no match",complete:"input is not complete"},defaults:{alerts:!0,events:!1,regex:{url:/^(https?:\/\/)?([\w\d\-_]+\.+[A-Za-z]{2,})+\/?/,phone:/^\+?([0-9]|[-|' '])+$/i,numeric:/^[0-9]+$/i,alphanumeric:/^[a-zA-Z0-9]+$/i,date:/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/i,email:{illegalChars:/[\(\)\<\>\,\;\:\\\/\"\[\]]/,filter:/^.+@.+\..{2,6}$/}},classes:{item:"item",alert:"alert",bad:"bad"}},tests:{sameAsPlaceholder:function(item,data){return!item.getAttribute("placeholder")||(data.value!=item.getAttribute("placeholder")||this.texts.empty)},hasValue:function(value){return!!value||this.texts.empty},linked:function(a,b,type){return b==a||(this.texts[type+"_repeat"]||this.texts.no_match)},email:function(item,data){return!(!this.settings.regex.email.filter.test(data.value)||data.value.match(this.settings.regex.email.illegalChars))||this.texts.email},text:function(item,data){var that=this;if(data.validateWords){var words=data.value.split(" "),wordsLength=function(len){for(var w=words.length;w--;)if(words[w].length<len)return that.texts.short;return!0};return!(words.length<data.validateWords||!wordsLength(2))||this.texts.complete}if(data.lengthRange&&data.value.length<data.lengthRange[0])return this.texts.short;if(data.lengthRange&&data.lengthRange[1]&&data.value.length>data.lengthRange[1])return this.texts.long;if(data.lengthLimit&&data.lengthLimit.length){for(;data.lengthLimit.length;)if(data.lengthLimit.pop()==data.value.length)return!0;return this.texts.complete}if(data.pattern){var regex,jsRegex;switch(data.pattern){case"alphanumeric":regex=this.settings.regex.alphanumeric;break;case"numeric":regex=this.settings.regex.numeric;break;case"phone":regex=this.settings.regex.phone;break;case"date":regex=this.settings.regex.date;break;default:regex=data.pattern}try{if(jsRegex=new RegExp(regex).test(data.value),data.value&&!jsRegex)return this.texts.invalid}catch(err){return console.warn(err,item,"regex is invalid"),this.texts.invalid}}return!0},number:function(item,data){var a=data.value;return isNaN(parseFloat(a))&&!isFinite(a)?this.texts.number:data.lengthRange&&a.length<data.lengthRange[0]?this.texts.short:data.lengthRange&&data.lengthRange[1]&&a.length>data.lengthRange[1]?this.texts.long:data.minmax[0]&&(0|a)<data.minmax[0]?this.texts.number_min:!(data.minmax[1]&&(0|a)>data.minmax[1])||this.texts.number_max},date:function(item,data){var day,A=data.value.split(/[-.\/]/g),i;if(item.valueAsNumber)return!0;for(i=A.length;i--;)if(isNaN(parseFloat(data.value))&&!isFinite(data.value))return this.texts.date;try{return(day=new Date(A[2],A[1]-1,A[0])).getMonth()+1==A[1]&&day.getDate()==A[0]||this.texts.date}catch(er){return this.texts.date}},time:function(item,data){var pattern;return!!/^([0-1][0-9]|2[0-3]):[0-5][0-9]$/.test(data.value)||this.texts.time},url:function(item,data){return!!this.settings.regex.url.test(data.value)||this.texts.url},hidden:function(item,data){return data.lengthRange&&data.value.length<data.lengthRange[0]?this.texts.short:!(data.pattern&&"alphanumeric"==data.pattern&&!this.settings.regex.alphanumeric.test(data.value))||this.texts.invalid},select:function(item,data){return!!data.value||this.texts.select},checkbox:function(item,data){return!!item.checked||this.texts.checked}},events:function(types,formElm){var that=this;function bindEventByType(type){formElm.addEventListener(type,function(e){that.checkitem(e.target)},!0)}types=types||this.settings.events,(formElm=formElm||this.DOM.scope)&&types&&(types instanceof Array?types.forEach(bindEventByType):"string"==typeof types&&bindEventByType(types))},mark:function(item,text){if(!text||!item)return!1;var that=this,item,alert=(item=this.closest(item,"."+this.settings.classes.item)).querySelector("."+this.settings.classes.alert),warning;return this.settings.alerts&&(alert?alert.innerHTML=text:(warning='<div class="'+this.settings.classes.alert+'">'+text+"</div>",item.insertAdjacentHTML("beforeend",warning))),item.classList.remove(this.settings.classes.bad),setTimeout(function(){item.classList.add(that.settings.classes.bad)}),warning},unmark:function(item){var warning;if(!item)return console.warn('no "item" argument, null or DOM object not found'),!1;var itemWrap=this.closest(item,"."+this.settings.classes.item);itemWrap&&(warning=itemWrap.querySelector("."+this.settings.classes.alert),itemWrap.classList.remove(this.settings.classes.bad)),warning&&warning.parentNode.removeChild(warning)},reset:function(formElm){var itemsToCheck,that=this;formElm=formElm||this.DOM.scope,(itemsToCheck=this.filterFormElements(formElm.elements)).forEach(function(elm){that.unmark(elm)})},testByType:function(item,data){var type=(data=this.extend({},data)).type;return"tel"==type&&(data.pattern=data.pattern||"phone"),type&&"password"!=type&&"tel"!=type&&"search"!=type&&"file"!=type||(type="text"),!this.tests[type]||this.tests[type].call(this,item,data)},prepareitemData:function(item){var nodeName=item.nodeName.toLowerCase(),id=Math.random().toString(36).substr(2,9);return item._validatorId=id,this.data[id]={},this.data[id].value=item.value.replace(/^\s+|\s+$/g,""),this.data[id].valid=!0,this.data[id].type=item.getAttribute("type"),this.data[id].pattern=item.getAttribute("pattern"),"select"===nodeName?this.data[id].type="select":"textarea"===nodeName&&(this.data[id].type="text"),this.data[id].validateWords=item.getAttribute("data-validate-words")||0,this.data[id].lengthRange=item.getAttribute("data-validate-length-range")?(item.getAttribute("data-validate-length-range")+"").split(","):[1],this.data[id].lengthLimit=!!item.getAttribute("data-validate-length")&&(item.getAttribute("data-validate-length")+"").split(","),this.data[id].minmax=!!item.getAttribute("data-validate-minmax")&&(item.getAttribute("data-validate-minmax")+"").split(","),this.data[id].validateLinked=item.getAttribute("data-validate-linked"),this.data[id]},closest:function(el,selector){var matchesFn,parent;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(fn){return"function"==typeof document.body[fn]&&(matchesFn=fn,!0)});el;){if((parent=el.parentElement)&&parent[matchesFn](selector))return parent;el=parent}return null},extend:function(target,varArgs){if(!target)throw new TypeError("Cannot convert undefined or null to object");var to=Object(target),nextKey,nextSource,index;for(index=1;index<arguments.length;index++)if(null!=(nextSource=arguments[index]))for(nextKey in nextSource)Object.prototype.hasOwnProperty.call(nextSource,nextKey)&&(to[nextKey]=nextSource[nextKey]);return to},checkitem:function(item,silent){if("hidden"!=item.type&&!item.clientWidth)return{valid:!0,error:""};if(!(item=this.filterFormElements([item])[0]))return{valid:!0,error:""};var linkedTo,testResult,optional=-1!=item.className.indexOf("optional"),data=this.prepareitemData(item),form=this.closest(item,"form");return!0===(testResult=this.tests.hasValue.call(this,data.value))&&(testResult=this.tests.sameAsPlaceholder.call(this,item,data)),data.valid=optional||!0===testResult,optional&&!data.value?{valid:!0,error:""}:(!0!==testResult&&(data.valid=!1),data.valid&&(testResult=this.testByType(item,data),data.valid=!0===testResult),data.valid&&data.validateLinked&&(linkedTo=0==data.validateLinked.indexOf("#")?document.body.querySelector(data.validateLinked):form.length?form.querySelector("[name="+data.validateLinked+"]"):document.body.querySelector("[name="+data.validateLinked+"]"),testResult=this.tests.linked.call(this,item.value,linkedTo.value,data.type),data.valid=!0===testResult),silent||this[data.valid?"unmark":"mark"](item,testResult),{valid:data.valid,error:!0===data.valid?"":testResult})},filterFormElements:function(items){var i,itemsToCheck=[];for(i=items.length;i--;){var isAllowedElement=items[i].nodeName.match(/input|textarea|select/gi),isRequiredAttirb=items[i].hasAttribute("required"),isDisabled=items[i].hasAttribute("disabled"),isOptional=-1!=items[i].className.indexOf("optional");isAllowedElement&&(isRequiredAttirb||isOptional)&&!isDisabled&&itemsToCheck.push(items[i])}return itemsToCheck},checkAll:function(formElm){if(!formElm)return console.warn("element not found"),!1;var that=this,result={valid:!0,items:[]},itemsToCheck;return this.filterFormElements(formElm.elements).forEach(function(elm,i){var itemData=that.checkitem(elm);result.valid=!!(result.valid*itemData.valid),result.items.push({item:elm,error:itemData.error,valid:!!itemData.valid})}),result}},FormValidator});